# vim: filetype=neomuttrc
source /usr/local/share/mutt-wizard/mutt-wizard.muttrc

# default account on open
source /Users/sam/.config/mutt/accounts/sam@vd.st.muttrc

# switch accounts
macro index,pager i1 '<sync-mailbox><enter-command>source /Users/sam/.config/mutt/accounts/sam@vd.st.muttrc<enter><change-folder>!<enter>;<check-stats>' "switch to sam@vd.st"
macro index,pager i2 '<sync-mailbox><enter-command>source /Users/sam/.config/mutt/accounts/samuel.stappen@rhizomer.com.muttrc<enter><change-folder>!<enter>;<check-stats>' "switch to samuel.stappen@rhizomer.com"

# override sam
macro index,pager ga "<change-folder>=Archives<enter>" "go to archive"
macro index,pager gb "<change-folder>=Belege<enter>" "go to Belege"
macro index,pager Ma ";<save-message>=Archives<enter>" "move mail to archive"
macro index,pager Mb ";<save-message>=Belege<enter>" "move mail to Belege"
macro index,pager Ca ";<copy-message>=Archives<enter>" "copy mail to archive"

bind compose \# ungroup-attachment
bind pager \Ct display-toggle-weed

set sidebar_visible = no
set sidebar_width = 50
set sidebar_short_path = no
set sidebar_next_new_wrap = no

set editor='nvim --cmd "let g:remove_trailing_spaces = 0"'

color sidebar_highlight red default
color sidebar_divider brightblack black
color sidebar_flagged green black
color sidebar_new yellow black

set date_format="%Y/%m/%d %I:%M%p"

macro compose m \
"<enter-command>set pipe_decode<enter>\
<pipe-message>pandoc -f gfm -t plain -o /tmp/msg.txt<enter>\
<pipe-message>pandoc -s -f gfm --embed-resources -o /tmp/msg.html --resource-path ~/.config/mutt/templates/ --template email<enter>\
<enter-command>unset pipe_decode<enter>\
<attach-file>/tmp/msg.txt<enter>\
<attach-file>/tmp/msg.html<enter>\
<tag-entry><previous-entry><tag-entry><group-alternatives>" \
"Convert markdown to HTML5 and plaintext alternative content types"
